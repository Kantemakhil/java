PRIOR_HISTORY_GRID_DATA {
select A.OFFENDER_BOOK_ID,
A.ORDER_TYPE,
A.OFFENSE_DESC,
A.OFFENSE_STATUS,
A.SOURCE,
A.COUNTY,
A.STATE,
A.VERIFIED,
A.COMMENT_TEXT,
A.OFFENSE_SEQ,
A.OFFENSE_DATE
from OFFENDER_OFFENCES A where A.OFFENDER_BOOK_ID= :offenderBookId order by A.OFFENSE_DATE desc
}

PRIOR_ORDER_TYPE_DATA{
SELECT CODE 
,DESCRIPTION
FROM REFERENCE_CODES
WHERE DOMAIN = 'OFFENCE_TYPE' AND (EXPIRED_DATE IS NULL AND ACTIVE_FLAG = 'Y') 
ORDER BY LIST_SEQ ASC ,CODE
}

PRIOR_STATUS_DATA{
SELECT CODE  
      ,DESCRIPTION
      FROM  REFERENCE_CODES
WHERE DOMAIN = 'OFFENCE_STS' AND (EXPIRED_DATE IS NULL AND ACTIVE_FLAG = 'Y')
ORDER BY LIST_SEQ ASC
}

PRIOR_SOURCE_DATA{
SELECT CODE 
,DESCRIPTION FROM REFERENCE_CODES
WHERE DOMAIN = 'INFO_SOURCE' AND (EXPIRED_DATE IS NULL AND ACTIVE_FLAG = 'Y')
ORDER BY LIST_SEQ ASC 
}

PRIOR_COUNTY_DATA{
SELECT CODE 
,DESCRIPTION 
FROM   REFERENCE_CODES 
WHERE  DOMAIN = 'COUNTRY' AND (EXPIRED_DATE IS NULL AND ACTIVE_FLAG = 'Y')
ORDER BY LIST_SEQ ASC
}

PRIOR_STATE_DATA{
SELECT CODE ,DESCRIPTION FROM   REFERENCE_CODES
 WHERE   DOMAIN = 'PROV_STATE' 
 AND (EXPIRED_DATE IS NULL AND ACTIVE_FLAG = 'Y')
 ORDER BY  LIST_SEQ ASC 
}
INSERT_PRIOR_HISTORY_RECORD{
INSERT INTO OFFENDER_OFFENCES 
(OFFENDER_BOOK_ID,ORDER_TYPE,OFFENSE_DESC,OFFENSE_STATUS,SOURCE,COUNTY,STATE,VERIFIED,COMMENT_TEXT,OFFENSE_SEQ,OFFENSE_DATE,CREATE_DATETIME,CREATE_USER_ID,MODIFY_DATETIME,MODIFY_USER_ID) 
VALUES
(:offenderBookId,:type,:offenseDescription,:status,:source,:country,:state,:verified,:comment,:offenseSeq,:priorHistoryDate,:createDateTime,:createUserId,:modifyDateTime,:modifyUserId)
}
UPDATE_PRIOR_HISTORY_RECORD{
UPDATE OFFENDER_OFFENCES
	   SET ORDER_TYPE = :type,
	       OFFENSE_DESC = :offenseDescription,      
	       OFFENSE_STATUS = :status,
	       SOURCE	 = :source,
	       COUNTY		= :country,
	       STATE	= :state,
	       VERIFIED = :verified,
	       COMMENT_TEXT	= :comment,
	       OFFENSE_DATE = :priorHistoryDate
	       WHERE OFFENDER_BOOK_ID = :offenderBookId 
	       AND OFFENSE_SEQ =:offenseSeq
}
DELETE_PRIOR_HISTORY_RECORD{
DELETE FROM OFFENDER_OFFENCES 
	   WHERE OFFENDER_BOOK_ID = :offenderBookId 
	   AND OFFENSE_SEQ =:offenseSeq
}
OIDOJOIN_NEWRECORD_PREINSERT_OFFENSE_SEQ{
select Max(OFFENSE_SEQ)+1 from OFFENDER_OFFENCES 
                          where OFFENDER_BOOK_ID =:offenderBookId
}
}