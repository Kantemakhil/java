
OIIPCTRA_OFFCON_FIND_OFFENDER_PPTY_CONTAINERS {
 	SELECT *  FROM OFFENDER_PPTY_CONTAINERS   where  OFFENDER_BOOK_ID = :offenderBookId 
}
OIIPCTRA_CONTX_FIND_OFFENDER_PPTY_CON_TXNS {
 	SELECT *  FROM OFFENDER_PPTY_CON_TXNS   where  PROPERTY_CONTAINER_ID= :propertyContainerId order by CREATE_DATE desc
}

OIIPCTRA_V_PHEAD_ONCHECKDELETEMASTER_ {
	SELECT 1 FROM OFFENDER_PPTY_CONTAINERS O WHERE O.OFFENDER_BOOK_ID = :OFFENDERBOOKID
}

OIIPCTRA_OFF_CON_POSTQUERY {
	SELECT DESCRIPTION code FROM AGENCY_LOCATIONS WHERE AGY_LOC_ID = :AGYLOCID
}

OIIPCTRA_CON_TX_POSTQUERY_ {
	SELECT DESCRIPTION FROM AGENCY_LOCATIONS WHERE AGY_LOC_ID = :AGYLOCID
}

OIIPCTRA_CON_TX_POSTQUERY_ {
	SELECT DESCRIPTION FROM AGENCY_LOCATIONS WHERE AGY_LOC_ID = :TRNFROMAGYLOCID
}

OIIPCTRA_CON_TX_POSTQUERY_ {
	SELECT DESCRIPTION FROM AGENCY_LOCATIONS WHERE AGY_LOC_ID = :TRNTOAGYLOCID
}

OIIPCTRA_CGFKCHK_OFF_CON_OFF_CON_PPTY {
	SELECT A.DESCRIPTION ,A.INTERNAL_LOCATION_CODE ,A.PARENT_INTERNAL_LOCATION_ID FROM   AGENCY_INTERNAL_LOCATIONS A WHERE  A.INTERNAL_LOCATION_ID = :INTERNALLOCATIONID
}

OIIPCTRA_CGFKCHK_OFF_CON_OFF_CON_PPTY_ {
	SELECT A.DESCRIPTION FROM   AGENCY_INTERNAL_LOCATIONS A WHERE  A.INTERNAL_LOCATION_ID = :INTERNAL_LOCATION_ID
}

OIIPCTRA_CGWHEN_NEW_FORM_INSTANCE_ {
	SELECT  current_timestamp , upper(user) FROM DUAL
}

OIIPCTRA_FIND_RGSTORELOCATION {
 	--SELECT C.DESCRIPTION ,        C.INTERNAL_LOCATION_CODE code ,        C.PARENT_INTERNAL_LOCATION_ID ,        C.INTERNAL_LOCATION_ID   FROM INT_LOC_USAGE_LOCATIONS A ,        INTERNAL_LOCATION_USAGES B ,        AGENCY_INTERNAL_LOCATIONS C  WHERE A.INTERNAL_LOCATION_USAGE_ID = B.INTERNAL_LOCATION_USAGE_ID    AND B.INTERNAL_LOCATION_USAGE = 'PROP'    AND B.AGY_LOC_ID IN (SELECT CAL.AGY_LOC_ID                           FROM CASELOAD_AGENCY_LOCATIONS CAL                          WHERE CAL.CASELOAD_ID = :CASELOADID                            AND CAL.AGY_LOC_ID NOT IN ( 'OUT' , 'TRN'  ) )     AND A.INTERNAL_LOCATION_ID = C.INTERNAL_LOCATION_ID    AND ((C.ACTIVE_FLAG = 'Y'    AND C.DEACTIVATE_DATE IS NULL )        OR (:MODE = 'ENTER-QUERY' ) )    AND NOT EXISTS (SELECT 1                      FROM INT_LOC_USAGE_LOCATIONS                     WHERE PARENT_USAGE_LOCATION_ID = A.USAGE_LOCATION_ID )    AND A.CAPACITY > (SELECT COUNT (* )                          FROM OFFENDER_PPTY_CONTAINERS                         WHERE INTERNAL_LOCATION_ID = A.INTERNAL_LOCATION_ID ) ORDER BY  C.AGY_LOC_ID ,A.LIST_SEQ  ,C.DESCRIPTION
 	select
	C.DESCRIPTION ,
	C.INTERNAL_LOCATION_CODE code ,
	C.PARENT_INTERNAL_LOCATION_ID ,
	C.INTERNAL_LOCATION_ID
from
	INT_LOC_USAGE_LOCATIONS A ,
	INTERNAL_LOCATION_USAGES B ,
	AGENCY_INTERNAL_LOCATIONS C
where
	A.INTERNAL_LOCATION_USAGE_ID = B.INTERNAL_LOCATION_USAGE_ID
	and B.INTERNAL_LOCATION_USAGE = 'PROP'
	and B.AGY_LOC_ID in (
	select
		CAL.AGY_LOC_ID
	from
		CASELOAD_AGENCY_LOCATIONS CAL
	where
		CAL.CASELOAD_ID = :CASELOADID
		and CAL.AGY_LOC_ID not in ( 'OUT' , 'TRN' ) )
	and A.INTERNAL_LOCATION_ID = C.INTERNAL_LOCATION_ID
	and ((C.ACTIVE_FLAG = 'Y'
		and coalesce (C.DEACTIVATE_DATE::date,'2020-12-12') ='2020-12-12' )
	or (:mode = 'ENTER-QUERY' ) )
	and not exists (
	select
		1
	from
		INT_LOC_USAGE_LOCATIONS
	where
		PARENT_USAGE_LOCATION_ID = A.USAGE_LOCATION_ID )
	and A.CAPACITY > (
	select
		COUNT (*)
	from
		OFFENDER_PPTY_CONTAINERS
	where
		INTERNAL_LOCATION_ID = A.INTERNAL_LOCATION_ID )
order by
	C.AGY_LOC_ID ,
	A.LIST_SEQ ,
	C.DESCRIPTION
}
