
OIMADMIS_FIND_RGSYSTEMMSG {
 	SELECT
  MESSAGE_TEXT, MESSAGE_TYPE, MESSAGE_NUMBER, APPLN_CODE
FROM SYSTEM_MESSAGES
WHERE
  APPLN_CODE = 'ADM'

}

OIMADMIS_FIND_RGOTHERSYSTEMMSG {
 	SELECT
  MESSAGE_TEXT DESCRIPTION, MESSAGE_NUMBER, APPLN_CODE
FROM SYSTEM_MESSAGES
WHERE
  APPLN_CODE = 'ADM'


}

OIMADMIS_FIND_RGAGENCYLOCATIONS {
	SELECT
  AL.DESCRIPTION, AL.AGY_LOC_ID,
  CASE
    WHEN (AL.DEACTIVATION_DATE IS NULL AND EXISTS ( SELECT 'X' FROM CASELOAD_AGENCY_LOCATIONS CAL WHERE CAL.CASELOAD_ID = :CASELOADID AND CAL.AGY_LOC_ID = AL.AGY_LOC_ID ) AND AL.AGY_LOC_ID NOT IN ('OUT' , 'TRN' )) THEN 'Y'
    ELSE 'N'
  END SEAL_FLAG
FROM AGENCY_LOCATIONS AL

}

OIMADMIS_FIND_RGLIVINGUNITS {
 	SELECT DESCRIPTION        ,LIVING_UNIT_ID   FROM LIVING_UNITS   WHERE AGY_LOC_ID = :AGYLOCID     AND DEACTIVATE_DATE IS NULL     AND ACTIVE_FLAG = 'Y' ORDER BY DESCRIPTION ASC
}

OIMADMIS_FIND_RGALERT {
 	SELECT
  DESCRIPTION, CODE
FROM REFERENCE_CODES
WHERE
  DOMAIN = 'ALERT' AND
  (ACTIVE_FLAG = 'Y')
ORDER BY
  LIST_SEQ, DESCRIPTION, CODE

}

OIMADMIS_FIND_RGALERTCODE {
  SELECT
  DESCRIPTION, CODE, ACTIVE_FLAG
FROM REFERENCE_CODES
WHERE
  DOMAIN = 'ALERT_CODE' AND
  (ACTIVE_FLAG = 'Y' ) AND
  PARENT_CODE = :ALERTTYPE
ORDER BY
  LIST_SEQ, DESCRIPTION, CODE
}

OIMADMIS_CASELOADADMALERTPROFILES_FIND_CASELOAD_ADM_ALERT_PROFILES {
SELECT
caseload_id,
alert_type,
alert_code,
message_text,
modify_user_id,
modify_datetime,
create_datetime,
create_user_id,
seal_flag,
row_id
FROM
caseload_adm_alert_profiles
WHERE
caseload_id = :caseloadid
}
OIMADMIS_CASELOADADMALERTPROFILES_INSERT_CASELOAD_ADM_ALERT_PROFILES {

 insert into CASELOAD_ADM_ALERT_PROFILES(CASELOAD_ID, ALERT_TYPE, ALERT_CODE, message_text, MODIFY_DATETIME, CREATE_DATETIME, CREATE_USER_ID, SEAL_FLAG) values(:caseloadId, :alertType, :alertCode, :messageText, current_timestamp, current_timestamp, :createUserId, :sealFlag)
}  

OIMADMIS_CASELOADADMALERTPROFILES_UPDATE_CASELOAD_ADM_ALERT_PROFILES {

    update CASELOAD_ADM_ALERT_PROFILES set CASELOAD_ID =:caseloadId, ALERT_TYPE =:alertType, ALERT_CODE =:alertCode, message_text =:messageText,  MODIFY_USER_ID =:modifyUserId, MODIFY_DATETIME = current_timestamp, SEAL_FLAG =:sealFlag where CASELOAD_ID = :caseloadId and ROW_ID = :rowId
} 

OIMADMIS_CASELOADADMALERTPROFILES_DELETE_CASELOAD_ADM_ALERT_PROFILES { 
	DELETE FROM CASELOAD_ADM_ALERT_PROFILES WHERE CASELOAD_ID = :caseloadId AND ROW_ID = :rowId
} 

OIMADMIS_CASELOADADMOTHERPROFILES_FIND_CASELOAD_ADM_OTHER_PROFILES {
SELECT
    caseload_id,
    young_offender_age,
    message_number,
    appln_code,
    trust_account_flag,
    living_unit_id,
    agy_loc_id,
    modify_user_id,
    modify_datetime,
    create_datetime,
    create_user_id,
    seal_flag,
     row_id
FROM
    caseload_adm_other_profiles
WHERE
    caseload_id = :caseloadid
}
OIMADMIS_CASELOADADMOTHERPROFILES_INSERT_CASELOAD_ADM_OTHER_PROFILES {
 insert into CASELOAD_ADM_OTHER_PROFILES(CASELOAD_ID, YOUNG_OFFENDER_AGE, MESSAGE_NUMBER, APPLN_CODE, TRUST_ACCOUNT_FLAG, LIVING_UNIT_ID, AGY_LOC_ID, MODIFY_DATETIME, CREATE_DATETIME, CREATE_USER_ID, SEAL_FLAG) values(:caseloadId, :youngOffenderAge, :messageNumber, :applnCode, :trustAccountFlag, :livingUnitId, :agyLocId, NULL, current_timestamp, :createUserId, :sealFlag) 
} 

OIMADMIS_CASELOADADMOTHERPROFILES_UPDATE_CASELOAD_ADM_OTHER_PROFILES {
 update CASELOAD_ADM_OTHER_PROFILES set CASELOAD_ID =:caseloadId, YOUNG_OFFENDER_AGE =:youngOffenderAge, MESSAGE_NUMBER =:messageNumber, APPLN_CODE =:applnCode, TRUST_ACCOUNT_FLAG =:trustAccountFlag, LIVING_UNIT_ID =:livingUnitId, AGY_LOC_ID =:agyLocId, MODIFY_USER_ID =:modifyUserId, MODIFY_DATETIME = current_timestamp, SEAL_FLAG =:sealFlag where CASELOAD_ID = :caseloadId and ROW_ID =:rowId
} 

OIMADMIS_CASELOADADMOTHERPROFILES_DELETE_CASELOAD_ADM_OTHER_PROFILES { 
	DELETE FROM CASELOAD_ADM_OTHER_PROFILES WHERE CASELOAD_ID = :caseloadId AND ROW_ID=:rowId
} 


OIMADMIS_CASELOAD_ADM_ALERT_PROFILES_POSTQUERYPOST-QUERY {
	SELECT MESSAGE_TYPE,MESSAGE_TEXT  FROM   SYSTEM_MESSAGES WHERE  APPLN_CODE = 'ADM' AND    MESSAGE_NUMBER = :MESSAGE_NUMBER
}

OIMADMIS_CASELOAD_ADM_OTHER_PROFILES_POSTQUERY {
	SELECT MESSAGE_TEXT FROM   SYSTEM_MESSAGES WHERE  APPLN_CODE = :APPLN_CODE AND    (MESSAGE_NUMBER = :MESSAGE_NUMBER OR (MESSAGE_NUMBER IS NULL AND :MESSAGE_NUMBER IS NULL ))
}

OIMADMIS_CREATE_FORM_GLOBALS {
	SELECT DESCRIPTION  FROM   OMS_MODULES WHERE  MODULE_NAME = :V_FORM_NAME
}
OIMADMIS_AVALIBLE_BEDS_IN_THE_LOCATION
{
select capacity - no_of_occupant from living_units where living_unit_id =:livingUnitId 
}
