
OIIPROLL_FIND_RGAGYLOC {
 	SELECT   DESCRIPTION , AGY_LOC_ID             FROM AGENCY_LOCATIONS AL            WHERE AGENCY_LOCATION_TYPE = 'INST'              AND (ACTIVE_FLAG = 'Y' OR '' = 'ENTER-QUERY' )              AND AL.AGY_LOC_ID IN (                     SELECT CA.AGY_LOC_ID                       FROM CASELOAD_AGENCY_LOCATIONS CA                      WHERE CA.CASELOAD_ID = :caseloadId                        AND CA.AGY_LOC_ID = AL.AGY_LOC_ID )              AND AL.AGY_LOC_ID NOT IN ('TRN' , 'OUT' )         ORDER BY LIST_SEQ ,DESCRIPTION ,AGY_LOC_ID
}
OIIPROLL_LVUNTSM_FIND_V_LIVING_UNIT_SUMMARIES {
 	select
		AGY_LOC_ID,
		LIVING_UNIT_ID,
		PARENT_LIVING_UNIT_ID,
		SUBSTR(LIVING_UNIT_DESC,
		LENGTH(:agylocId)+ 2) LIVING_UNIT_DESC,
		USER_DESC,
		LEVEL_1_CODE,
		LEVEL_2_CODE,
		LEVEL_3_CODE,
		LEVEL_4_CODE,
		CAPACITY,
		LIST_SEQ,
		ACTIVE_FLAG,
		DEACTIVATE_DATE,
		LIVING_UNIT_TYPE,
		LIVING_UNIT_TYPE_DESC,
		ALLOCATED,
		IN_LIVING_UNITS,
		OUT_OF_LIVING_UNITS,
		OUT_OF_AGY,
		RESERVED_BEDS,
		VACANCY,
		FILLED_FLAG,
		FUNC_GET_NEXTBUTTON(LIVING_UNIT_ID) NEXTBUTTON
	from
		V_LIVING_UNIT_SUMMARIES VUS
}
OIIPROLL_LVUNTSM_FIND_V_LIVING_UNIT_SUMMARIES_TOTAL_COUNT {
   SELECT SUM(CAPACITY) CAPACITY, SUM(ALLOCATED) ALLOCATED, SUM(IN_LIVING_UNITS) IN_LIVING_UNITS, SUM(OUT_OF_LIVING_UNITS) OUT_OF_LIVING_UNITS, 
   SUM(OUT_OF_AGY) OUT_OF_AGY, SUM(RESERVED_BEDS) RESERVED_BEDS, SUM(VACANCY) VACANCY ,SUM(LIST_SEQ) LIST_SEQ FROM V_LIVING_UNIT_SUMMARIES
}
OIIPROLL_ITLCSM_FIND_V_INT_LOC_SUMMARIES {
 	SELECT AGY_LOC_ID ,INTERNAL_LOCATION_ID ,PARENT_INTERNAL_LOCATION_ID ,INTERNAL_LOCATION_CODE ,SUBSTR(INTERNAL_LOCATION_DESC, LENGTH(:agylocId)+2) INTERNAL_LOCATION_DESC ,USER_DESC ,TRACKING_FLAG ,CAPACITY ,LIST_SEQ ,ACTIVE_FLAG ,DEACTIVATE_DATE ,INTERNAL_LOCATION_TYPE ,INTERNAL_LOCATION_TYPE_DESC ,IN_LOCATIONS ,CASE WHEN (SELECT COUNT(*) FROM V_INT_LOC_SUMMARIES VLUS WHERE VLUS.PARENT_INTERNAL_LOCATION_ID = VUS.INTERNAL_LOCATION_ID) > 0 THEN 'Y' ELSE 'N' END NEXTBUTTON   FROM V_INT_LOC_SUMMARIES VUS
}
OIIPROLL_ITLCSM_FIND_V_INT_LOC_SUMMARIES_TOTAL_COUNT {
 	SELECT SUM(IN_LOCATIONS) IN_LOCATIONS FROM V_INT_LOC_SUMMARIES
}
OIIPROLL_OIIPROLL_WHENNEWFORMINSTANCE_ {
	SELECT ALAL.AGY_LOC_ID, ALAL.DESCRIPTION DSP_DESCRIPTION2 FROM AGENCY_LOCATIONS ALAL WHERE ALAL.AGENCY_LOCATION_TYPE = 'INST' AND ALAL.ACTIVE_FLAG = 'Y' AND ALAL.AGY_LOC_ID IN (SELECT CA.AGY_LOC_ID FROM CASELOAD_AGENCY_LOCATIONS CA WHERE CA.CASELOAD_ID = :CASELOADID) AND ALAL.AGY_LOC_ID NOT IN ('TRN','OUT')
}
