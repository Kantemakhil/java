
OSUEMAIL_FIND_RGWORKS {
-- 	SELECT REF_CD1.DESCRIPTION description , REF_CD2.DESCRIPTION code ,REF_CD1.DESCRIPTION WORK_TYPE , REF_CD2.DESCRIPTION WORK_SUB_TYPE ,WORKS.WORK_ID WORK_ID FROM WORKS         ,REFERENCE_CODES REF_CD1         ,REFERENCE_CODES REF_CD2   WHERE WORKS.WORKFLOW_TYPE = 'EMAIL'     AND WORKS.ACTIVE_FLAG   = 'Y'     AND WORKS.MANUAL_SELECT_FLAG   = 'Y'     AND DECODE(WORKS.CASELOAD_TYPE , 'BOTH' , :caseloadType , WORKS.CASELOAD_TYPE )= :caseloadType     AND WORKS.WORK_TYPE = REF_CD1.CODE     AND REF_CD1.DOMAIN = 'TASK_TYPE'     AND WORKS.WORK_SUB_TYPE = REF_CD2.CODE     AND REF_CD2.DOMAIN = 'TASK_SUBTYPE'  ORDER BY REF_CD1.LIST_SEQ ASC , REF_CD1.DESCRIPTION ASC , REF_CD2.LIST_SEQ ASC , REF_CD2.DESCRIPTION ASC
	 SELECT REF_CD1.DESCRIPTION description , REF_CD2.DESCRIPTION code ,REF_CD1.DESCRIPTION WORK_TYPE , REF_CD2.DESCRIPTION WORK_SUB_TYPE ,WORKS.WORK_ID WORK_ID FROM WORKS         ,REFERENCE_CODES REF_CD1         ,REFERENCE_CODES REF_CD2   WHERE WORKS.WORKFLOW_TYPE = 'EMAIL'     AND WORKS.ACTIVE_FLAG   = 'Y'     AND WORKS.MANUAL_SELECT_FLAG   = 'Y'     AND CASE WORKS.CASELOAD_TYPE  WHEN 'BOTH'  THEN  :caseloadType  ELSE WORKS.CASELOAD_TYPE  END= :caseloadType     AND WORKS.WORK_TYPE = REF_CD1.CODE     AND REF_CD1.DOMAIN = 'TASK_TYPE'     AND WORKS.WORK_SUB_TYPE = REF_CD2.CODE     AND REF_CD2.DOMAIN = 'TASK_SUBTYPE'  ORDER BY REF_CD1.LIST_SEQ ASC , REF_CD1.DESCRIPTION ASC , REF_CD2.LIST_SEQ ASC , REF_CD2.DESCRIPTION ASC

}
OSUEMAIL_FIND_EMAIL_RECIPIENTS{
SELECT idadd.INTERNET_ADDRESS, idadd.INTERNET_ADDRESS_CLASS, work.EMAIL_SUBJECT, work.EMAIL_BODY,idadd.OWNER_ID FROM INTERNET_ADDRESSES idadd, WORKS work WHERE idadd.OWNER_CLASS = 'WORKFLOW' AND work.WORK_ID = :workId AND idadd.OWNER_ID = work.WORK_ID ORDER BY INTERNET_ADDRESS_CLASS DESC, INTERNET_ADDRESS_ID
}
OSUEMAIL_FIND_OFFENDERS_NAME{
--SELECT offenders.LAST_NAME || ', ' || offenders.FIRST_NAME || DECODE(offenders.MIDDLE_NAME, NULL, NULL, ' ' || SUBSTR(offenders.MIDDLE_NAME, 1,1) || '.' ) || ' (' || DECODE(oms_miscellaneous.get_profile_value ('DISPLAY', 'ID_DISPLAY'), 'Y', UPPER( LPAD( LTRIM ( offenders.OFFENDER_ID_DISPLAY, '0' ), 10, '0')), offenders.OFFENDER_ID_DISPLAY) || ')' offenderName FROM OFFENDER_BOOKINGS, OFFENDERS WHERE offender_bookings.offender_book_id = :offenderBookId AND offender_bookings.offender_id = offenders.offender_id
select
	offd.last_name || ', ' || offd.first_name ||
	case
		when coalesce(offd.middle_name::text, '') = '' then null
		else ' ' || SUBSTR(offd.middle_name,
		1,
		1) || '.'
	end || ' (' ||
	case
		when oms_miscellaneous_get_profile_value('DISPLAY',
		'ID_DISPLAY')= 'Y' then UPPER( LPAD( LTRIM( offd.offender_id_display, '0' ), 10, '0'))
		else offd.offender_id_display
	end || ')' as names
from
	offender_bookings ,
	offenders offd
where
	offender_bookings.offender_book_id = :offenderBookId
	and offender_bookings.OFFENDER_ID = offd.OFFENDER_ID
}
OSUEMAIL_FIND_EMAIL_BODY_SUBJECT{
SELECT EMAIL_SUBJECT,EMAIL_BODY FROM WORKS WHERE WORK_ID =:workId
}
OSUEMAIL_STSK_INSERT_ADHOC_EMAIL {
	INSERT INTO CREATE_ADHOC_EMAIL(EMAIL_ID,OFFENDER_BOOK_ID,WORK_ID,EMAIL_SUBJECT,EMAIL_BODY,EMAIL_SENDER,EMAIL_FROM,
	CREATE_DATETIME,CREATE_USER_ID,MODIFY_DATETIME,SEAL_FLAG) 
	VALUES(:emailId,:pOffenderBookId,:pWorkId,:pEmailSubject,:pEmailBody,:pEmailSender,:pEmailFrom,current_timestamp,
	:createUserId,current_timestamp,:sealFlag)
}
OSUEMAIL_STSK_INSERT_ADHOC_EMAIL_RECIPIENTS {
	INSERT INTO ADHOC_EMAIL_RECIPIENTS(EMAIL_ID,INTERNET_ADDRESS_CLASS,INTERNET_ADDRESS,CREATE_DATETIME,CREATE_USER_ID,MODIFY_DATETIME) 
	VALUES(:emailId,:internetAddressClass,:internetAddress,current_timestamp,:createUserId,current_timestamp)
}
OUSEMAIL_ADHOC_EMAIL_SEQ_NEXTVAL{
--SELECT ADHOC_EMAIL_SEQ.NEXTVAL FROM DUAL
select NEXTVAL('ADHOC_EMAIL_SEQ')

}
